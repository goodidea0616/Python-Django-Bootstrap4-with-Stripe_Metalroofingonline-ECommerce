'use strict';$(document).ready(function(){function e(){"pickup"!=$("#postage").val()&&($("#standard").is(":checked")||$("#express").is(":checked")||$("#postage-error").attr("hidden",!1),$("#full-form-link").click(),$("#submit_btn").click())}function g(a){$("#main_form")[0].checkValidity()&&f.createToken(d).then(function(b){b.error?(document.getElementById("card-errors").textContent=b.error.message,$("#place_order_btn").attr("disabled",!1),$("#place_order_btn").html('<i class="mr-2 far fa-credit-card"></i>PLACE YOUR ORDER')):
($("#stripe_token").val(b.token.id),h(b.token))})}function h(a){a=$("#main_form").serialize();validate_form_url="/cart/validate-form-stripe/";$.ajax({url:validate_form_url,type:"post",data:a,dataType:"json",success:function(b){"stripe_error"==b.valid?($("#modal-body").text(b.errors),$("#myModal").modal("show"),$("#place_order_btn").attr("disabled",!1),$("#place_order_btn").html('<i class="mr-2 far fa-credit-card"></i>PLACE YOUR ORDER')):"form_error"==b.valid?($("#modal-body").html(b.errors),$("#myModal").modal("show"),
$("#place_order_btn").attr("disabled",!1),$("#place_order_btn").html('<i class="mr-2 far fa-credit-card"></i>PLACE YOUR ORDER')):"true"==b.valid&&(console.log("TRUE"),window.location.replace("/cart/checkout/success/"))},error:function(b){$("#place_order_btn").attr("disabled",!1);$("#place_order_btn").html('<i class="mr-2 far fa-credit-card"></i>PLACE YOUR ORDER')}})}var k=$("#navbarDropdownState option:selected").val();$("#state").val(k);$("#postal_code").change(function(){if(!$("#standard").is(":checked")&&
!$("#express").is(":checked")){$("#delivery-option").html('<i class="fas fa-spinner fa-spin"></i><br>Finding your delivery options!');var a=$("#postal_code").val(),b=$("#cart_total").val();$("#collect-link");delivery_options_url="/cart/delivery-options/";$.ajax({url:delivery_options_url,type:"post",data:{postal_code:a,csrfmiddlewaretoken:CSRF_TOKEN},dataType:"json",success:function(c){console.log("ajax success");"0"==c.post_code?($("#delivery-option").html(c.message),$("#date_hidden_input").attr("required",
!1),$("#submit_btn").attr("disabled",!0)):(c.message?$("#delivery-option").html("$"+c.price+" Delivery to post code: "+c.post_code+'<i class="fas fa-check ml-2"></i><br/>'+c.message):$("#delivery-option").html("$"+c.price+" Delivery to post code: "+c.post_code+'<i class="fas fa-check ml-2"></i>'),$("#postage").val(c.price),$("#delivery-amount").text(c.price),$("#total").text((parseFloat(c.price)+parseFloat(b)).toFixed(2)),$("#delivery-date-selector").attr("hidden",!1),$("#date_hidden_input").attr("required",
!0),$("#submit_btn").attr("disabled",!1))}})}});$("#deliver-link").click(function(a){a.preventDefault();$("#autocomplete").val("");$("#deliver-link").addClass("themed-grid-col-selected");$("#collect-link").removeClass("themed-grid-col-selected");$("#delivery-option").html("Please enter your address to see delivery options");$("#address_line_1").val("");$("#city").val("");$("#postal_code").val("");$("#autocomplete-group").is(":hidden")&&($("#autocomplete-group").attr("hidden",!1),$("#delivery-autocomplete-label").attr("hidden",
!1));$("#postage-option").is(":hidden")&&($("#postage-option").attr("hidden",!1),$("#pickup-option").attr("hidden",!0),$("#delivery-amount").text("17.99"),a=$("#cart_total").val(),$("#total").text((parseFloat(a)+17.99).toFixed(2)))});$("#collect-link").click(function(a){a.preventDefault();a=$("#cart_total").val();$("#delivery-amount").val();$("#standard").attr("required",!1);$("#postage").val("pickup");$("#deliver-link").removeClass("themed-grid-col-selected");$("#collect-link").addClass("themed-grid-col-selected");
$("#delivery-date-selector").attr("hidden",!0);$("#date_hidden_input").attr("required",!1);$("#address_line_1").val("48 Watt Rd");$("#city").val("Mornington");$("#postal_code").val("3931");$("#state").val("VIC");$("#delivery-amount").text("0");$("#delivery-option").html("Free pickup has been selected.<br/>Please collect from 48 Watt Road, Mornington.");$("#total").text(a);$("#autocomplete-group").is(":visible")&&($("#autocomplete-group").attr("hidden",!0),$("#delivery-autocomplete-label").attr("hidden",
!0));$("#address-group").is(":visible")&&($("#address-group").attr("hidden",!0),$("#city-group").attr("hidden",!0),$("#postal-group").attr("hidden",!0),$("#state-group").attr("hidden",!0));$("#postage-option").is(":visible")&&($("#postage-option").attr("hidden",!0),$("#pickup-option").attr("hidden",!1))});$("#full-form-link").click(function(a){a.preventDefault();$("#address-group").is(":visible")?($("#address-group").attr("hidden",!0),$("#city-group").attr("hidden",!0),$("#postal-group").attr("hidden",
!0),$("#state-group").attr("hidden",!0)):($("#address-group").attr("hidden",!1),$("#city-group").attr("hidden",!1),$("#postal-group").attr("hidden",!1),$("#state-group").attr("hidden",!1))});$("#choose_btn").click(function(a){$("#asap_btn").removeClass("delivery-type-btn");$("#asap_btn").addClass("delivery-type-unselected");$("#choose_btn").removeClass("delivery-type-unselected");$("#choose_btn").addClass("delivery-type-btn");$("#asap_check").attr("hidden",!0);$("#choose_check").attr("hidden",!1);
$("#calendar").attr("hidden",!1)});$("#asap_btn").click(function(a){$("#postage").val("pickup");$("#date_hidden_input").val("ASAP");$("#choose_btn").removeClass("delivery-type-btn");$("#choose_btn").addClass("delivery-type-unselected");$("#asap_btn").removeClass("delivery-type-unselected");$("#asap_btn").addClass("delivery-type-btn");$("#choose_check").attr("hidden",!0);$("#asap_check").attr("hidden",!1);$("#calendar").attr("hidden",!0)});$("#stripe-payment").click(function(a){a.preventDefault();
$("#paypal-payment").removeClass("themed-grid-col-selected");$("#stripe-payment").addClass("themed-grid-col-selected");$("#stripe-form").attr("hidden",!1);$("#place_order_btn").attr("hidden",!1);$("#place_order_btn_paypal").attr("hidden",!0);$("#paypal-button-container").attr("hidden",!0)});$("#paypal-payment").click(function(a){a.preventDefault();$("#stripe-payment").removeClass("themed-grid-col-selected");$("#paypal-payment").addClass("themed-grid-col-selected");$("#stripe-form").attr("hidden",
!0);$("#place_order_btn").attr("hidden",!0);$("#place_order_btn_paypal").attr("hidden",!1)});$("#billing_btn").click(function(a){a.preventDefault();$("#billing_group").is(":visible")?($("#billing_group").attr("hidden",!0),$("#billing_first_name").attr("required",!1),$("#billing_last_name").attr("required",!1),$("#billing_phone_number").attr("required",!1),$("#billing_address_line_1").attr("required",!1),$("#billing_city").attr("required",!1),$("#billing_state").attr("required",!1),$("#billing_postal_code").attr("required",
!1),$("#billing_country").attr("required",!1)):($("#billing_group").attr("hidden",!1),$("#billing_first_name").attr("required",!0),$("#billing_last_name").attr("required",!0),$("#billing_phone_number").attr("required",!0),$("#billing_address_line_1").attr("required",!0),$("#billing_city").attr("required",!0),$("#billing_state").attr("required",!0),$("#billing_postal_code").attr("required",!0),$("#billing_country").attr("required",!0))});$("#place_order_btn").click(function(a){a.preventDefault();console.log("checkValidity = ",
$("#main_form")[0].checkValidity());$("#main_form")[0].checkValidity()?($("#postage-error").attr("hidden",!0),$("#place_order_btn").attr("disabled",!0),$("#place_order_btn").html('<i class="fa fa-spinner fa-spin" aria-hidden="true"></i> PROCESSING'),g()):(e(),$("#full-form-link").click(),$("#submit_btn").click())});$("#place_order_btn_paypal").click(function(a){a.preventDefault();$("#main_form")[0].checkValidity()?($("#postage-error").attr("hidden",!0),$("#place_order_btn_paypal").attr("disabled",
!0),$("#place_order_btn_paypal").html('<i class="fa fa-spinner fa-spin" aria-hidden="true"></i> PROCESSING'),a=$("#main_form").serialize(),validate_form_url="/cart/validate-form-paypal/",$.ajax({url:validate_form_url,type:"post",data:a,dataType:"json",success:function(b){"stripe_error"==b.valid?(console.log("stripe_error"),$("#modal-body").text(b.errors),$("#myModal").modal("show"),$("#place_order_btn_paypal").attr("disabled",!1),$("#place_order_btn_paypal").html('<i class="mr-2 far fa-credit-card"></i>PLACE YOUR ORDER')):
"form_error"==b.valid?(console.log("form_error"),$("#modal-body").html(b.errors),$("#myModal").modal("show"),$("#place_order_btn_paypal").attr("disabled",!1),$("#place_order_btn_paypal").html('<i class="mr-2 far fa-credit-card"></i>PLACE YOUR ORDER')):"true"==b.valid&&(console.log("TRUE"),window.location.replace("/cart/checkout/paypal/"))},error:function(b){$("#place_order_btn_paypal").attr("disabled",!1);$("#place_order_btn_paypal").html('<i class="mr-2 far fa-credit-card"></i>CONTINUE TO CHECKOUT')}})):
e()});$("input:radio").change(function(){var a=$("#cart_total").val();$("#postage-error").attr("hidden",!0);"standard"==$(this).val()?($("#postage").val("standard"),"WA"==$("#navbarDropdownState").val()?($("#delivery-amount").text("20.99"),$("#total").text((parseFloat(a)+20.99).toFixed(2))):($("#delivery-amount").text("17.99"),$("#total").text((parseFloat(a)+17.99).toFixed(2)))):($("#postage").val("express"),"WA"==$("#navbarDropdownState").val()?($("#delivery-amount").text("28.99"),$("#total").text((parseFloat(a)+
28.99).toFixed(2))):($("#delivery-amount").text("25.99"),$("#total").text((parseFloat(a)+25.99).toFixed(2))))});daysOfWeekDisabled=[0,6];$(function(){$("#datepicker").datepicker({inline:!0,locale:"en-AU",startDate,format:"dd/mm/yyyy",datesDisabled,daysOfWeekDisabled,templates:{leftArrow:'<i class="fas fa-chevron-left"></i>',rightArrow:'<i class="fas fa-chevron-right"></i>'},todayHighlight:!0,weekStart:1})});$("#datepicker").on("changeDate",function(){$("#date_hidden_input").val($("#datepicker").datepicker("getDate"))});
var f=Stripe(pub_key),d=f.elements().create("card",{style:{base:{color:"#32325d",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}});d.mount("#card-element");d.addEventListener("change",function(a){document.getElementById("card-errors").textContent=a.error?a.error.message:""})});